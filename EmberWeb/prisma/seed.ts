import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üöÄ D√©but du seed...');
  console.log('üìç DATABASE_URL:', process.env.DATABASE_URL);
  
  try {
    // Test de connexion
    await prisma.$connect();
    console.log('‚úÖ Connexion √† la DB r√©ussie');
    
    // Supprimer les donn√©es existantes (optionnel)
    const deletedQuestions = await prisma.question.deleteMany({});
    const deletedCategories = await prisma.questionCategory.deleteMany({});
    
    console.log('üóëÔ∏è Questions supprim√©es:', deletedQuestions.count);
    console.log('üóëÔ∏è Cat√©gories supprim√©es:', deletedCategories.count);

    // Cr√©er les cat√©gories avec vos th√®mes (SANS la cat√©gorie IA)
    const categories = await Promise.all([
      prisma.questionCategory.create({
        data: {
          name: "Souvenirs & Nostalgie",
          description: "Questions pour raviver et partager des moments pr√©cieux du pass√©",
          emoji: "üåü",
          color: "#FFD700"
        }
      }),
      prisma.questionCategory.create({
        data: {
          name: "R√©flexions Profondes",
          description: "Questions introspectives pour explorer ses pens√©es et valeurs",
          emoji: "üí≠",
          color: "#6366F1"
        }
      }),
      prisma.questionCategory.create({
        data: {
          name: "Relations & Connexions",
          description: "Questions sur les liens humains, l'amiti√© et l'amour",
          emoji: "‚ù§Ô∏è",
          color: "#EF4444"
        }
      }),
      prisma.questionCategory.create({
        data: {
          name: "R√™ves & Aspirations",
          description: "Questions sur les objectifs, ambitions et visions d'avenir",
          emoji: "üéØ",
          color: "#F59E0B"
        }
      }),
      prisma.questionCategory.create({
        data: {
          name: "Croissance Personnelle",
          description: "Questions sur l'√©volution, les apprentissages et les transformations",
          emoji: "üå±",
          color: "#10B981"
        }
      })
    ]);

    console.log('‚úÖ Cat√©gories cr√©√©es:', categories.length);

    // Cr√©er 20 questions par cat√©gorie
    const questionsData = [
      // ===== SOUVENIRS & NOSTALGIE (20 questions) =====
      { text: "Quel est ton plus beau souvenir d'enfance ?", categoryId: categories[0].id },
      { text: "Quelle √©poque de ta vie aimerais-tu revivre ?", categoryId: categories[0].id },
      { text: "Quel moment de ta vie te fait encore sourire aujourd'hui ?", categoryId: categories[0].id },
      { text: "Quelle tradition familiale te tient le plus √† c≈ìur ?", categoryId: categories[0].id },
      { text: "Quel objet ancien conserves-tu pr√©cieusement et pourquoi ?", categoryId: categories[0].id },
      { text: "Quelle chanson te ram√®ne instantan√©ment dans le pass√© ?", categoryId: categories[0].id },
      { text: "Quel endroit de ton enfance te manque le plus ?", categoryId: categories[0].id },
      { text: "Quelle habitude de tes grands-parents te fait sourire ?", categoryId: categories[0].id },
      { text: "Quel jeu d'enfance √©tait ton pr√©f√©r√© ?", categoryId: categories[0].id },
      { text: "Quelle odeur te rappelle imm√©diatement ton enfance ?", categoryId: categories[0].id },
      { text: "Quel √©tait ton film ou dessin anim√© favori quand tu √©tais petit ?", categoryId: categories[0].id },
      { text: "Quelle f√™te d'anniversaire as-tu le plus marqu√©e ?", categoryId: categories[0].id },
      { text: "Quel voyage de famille reste grav√© dans ta m√©moire ?", categoryId: categories[0].id },
      { text: "Quelle photo de toi enfant te fait le plus rire ?", categoryId: categories[0].id },
      { text: "Quel professeur ou instituteur t'a marqu√© et pourquoi ?", categoryId: categories[0].id },
      { text: "Quelle recette de famille √©voque le plus de souvenirs ?", categoryId: categories[0].id },
      { text: "Quel √©tait ton livre d'enfance pr√©f√©r√© ?", categoryId: categories[0].id },
      { text: "Quelle b√™tise d'enfance te fait encore rire ?", categoryId: categories[0].id },
      { text: "Quel ami d'enfance aimerais-tu retrouver ?", categoryId: categories[0].id },
      { text: "Quelle f√™te ou c√©l√©bration de ton pass√© √©tait magique ?", categoryId: categories[0].id },

      // ===== R√âFLEXIONS PROFONDES (20 questions) =====
      { text: "Quelle est la plus grande le√ßon que la vie t'ait enseign√©e ?", categoryId: categories[1].id },
      { text: "Qu'est-ce qui donne vraiment du sens √† ta vie ?", categoryId: categories[1].id },
      { text: "Comment d√©finirais-tu le bonheur ?", categoryId: categories[1].id },
      { text: "Quelle v√©rit√© sur toi as-tu r√©cemment d√©couverte ?", categoryId: categories[1].id },
      { text: "Quel conseil donnerais-tu √† ton moi du pass√© ?", categoryId: categories[1].id },
      { text: "Qu'est-ce qui te fait te sentir vraiment vivant ?", categoryId: categories[1].id },
      { text: "Quelle peur as-tu r√©ussi √† surmonter ?", categoryId: categories[1].id },
      { text: "Comment vois-tu ta place dans le monde ?", categoryId: categories[1].id },
      { text: "Quelle valeur est non-n√©gociable pour toi ?", categoryId: categories[1].id },
      { text: "Qu'est-ce qui te rend unique selon toi ?", categoryId: categories[1].id },
      { text: "Quel moment t'a fait grandir le plus rapidement ?", categoryId: categories[1].id },
      { text: "Comment g√®res-tu l'incertitude dans ta vie ?", categoryId: categories[1].id },
      { text: "Quelle question existentielle te pr√©occupe le plus ?", categoryId: categories[1].id },
      { text: "Qu'as-tu appris sur toi cette ann√©e ?", categoryId: categories[1].id },
      { text: "Comment d√©finirais-tu la r√©ussite pour toi ?", categoryId: categories[1].id },
      { text: "Quelle croyance as-tu abandonn√©e en grandissant ?", categoryId: categories[1].id },
      { text: "Qu'est-ce qui te donne de l'espoir dans les moments difficiles ?", categoryId: categories[1].id },
      { text: "Comment veux-tu √™tre remembr√© ?", categoryId: categories[1].id },
      { text: "Quelle sagesse aimerais-tu transmettre ?", categoryId: categories[1].id },
      { text: "Qu'est-ce qui te fait te sentir en paix ?", categoryId: categories[1].id },

      // ===== RELATIONS & CONNEXIONS (20 questions) =====
      { text: "Qui a eu l'impact le plus positif sur ta vie ?", categoryId: categories[2].id },
      { text: "Qu'est-ce qui rend une amiti√© pr√©cieuse pour toi ?", categoryId: categories[2].id },
      { text: "Quel est le plus beau compliment qu'on t'ait jamais fait ?", categoryId: categories[2].id },
      { text: "Comment exprimes-tu ton amour aux gens qui comptent ?", categoryId: categories[2].id },
      { text: "Quelle qualit√© admires-tu le plus chez les autres ?", categoryId: categories[2].id },
      { text: "Quel geste d'amour t'a le plus touch√© ?", categoryId: categories[2].id },
      { text: "Comment sais-tu qu'une personne est vraiment ton ami ?", categoryId: categories[2].id },
      { text: "Quelle conversation a chang√© ta vision des choses ?", categoryId: categories[2].id },
      { text: "Qui dans ta vie te comprend le mieux ?", categoryId: categories[2].id },
      { text: "Quel sacrifice as-tu fait par amour ?", categoryId: categories[2].id },
      { text: "Qu'est-ce qui te rend fier de tes proches ?", categoryId: categories[2].id },
      { text: "Comment g√®res-tu les conflits dans tes relations ?", categoryId: categories[2].id },
      { text: "Quelle le√ßon d'amour as-tu apprise de tes parents ?", categoryId: categories[2].id },
      { text: "Qui t'a aid√© √† devenir qui tu es aujourd'hui ?", categoryId: categories[2].id },
      { text: "Quel moment partag√© avec un proche √©tait parfait ?", categoryId: categories[2].id },
      { text: "Comment montres-tu que tu tiens √† quelqu'un ?", categoryId: categories[2].id },
      { text: "Quelle r√©conciliation t'a fait grandir ?", categoryId: categories[2].id },
      { text: "Qu'est-ce qui te touche le plus chez les gens ?", categoryId: categories[2].id },
      { text: "Quel conseil relationnel donnerais-tu √† un jeune ?", categoryId: categories[2].id },
      { text: "Comment cr√©es-tu des liens profonds avec les autres ?", categoryId: categories[2].id },

      // ===== R√äVES & ASPIRATIONS (20 questions) =====
      { text: "Quel r√™ve aimerais-tu r√©aliser dans les 5 prochaines ann√©es ?", categoryId: categories[3].id },
      { text: "Si tu pouvais changer le monde, par quoi commencerais-tu ?", categoryId: categories[3].id },
      { text: "Quel d√©fi aimerais-tu te lancer cette ann√©e ?", categoryId: categories[3].id },
      { text: "Dans quel endroit du monde r√™ves-tu de vivre ?", categoryId: categories[3].id },
      { text: "Quelle version de toi veux-tu devenir ?", categoryId: categories[3].id },
      { text: "Quel m√©tier aurais-tu aim√© exercer dans une autre vie ?", categoryId: categories[3].id },
      { text: "Quelle cause te tient assez √† c≈ìur pour te battre ?", categoryId: categories[3].id },
      { text: "Quel projet fou aimerais-tu concr√©tiser ?", categoryId: categories[3].id },
      { text: "Quelle aventure figure en haut de ta bucket list ?", categoryId: categories[3].id },
      { text: "Quel impact veux-tu laisser sur le monde ?", categoryId: categories[3].id },
      { text: "Quelle comp√©tence r√™ves-tu de ma√Ætriser parfaitement ?", categoryId: categories[3].id },
      { text: "Quel voyage de r√™ve planifies-tu depuis longtemps ?", categoryId: categories[3].id },
      { text: "Quelle ≈ìuvre (livre, film, art) aimerais-tu cr√©er ?", categoryId: categories[3].id },
      { text: "Quel d√©fi sportif ou physique te tente ?", categoryId: categories[3].id },
      { text: "Quelle tradition aimerais-tu instaurer dans ta famille ?", categoryId: categories[3].id },
      { text: "Quel h√©ritage veux-tu laisser √† tes enfants ?", categoryId: categories[3].id },
      { text: "Quelle innovation aimerais-tu voir na√Ætre ?", categoryId: categories[3].id },
      { text: "Quel r√™ve d'enfance aimerais-tu encore r√©aliser ?", categoryId: categories[3].id },
      { text: "Quelle exp√©rience veux-tu absolument vivre avant tes 50 ans ?", categoryId: categories[3].id },
      { text: "Quel message veux-tu faire passer au monde ?", categoryId: categories[3].id },

      // ===== CROISSANCE PERSONNELLE (20 questions) =====
      { text: "Quelle comp√©tence aimerais-tu d√©velopper ?", categoryId: categories[4].id },
      { text: "Quel aspect de ta personnalit√© as-tu le plus travaill√© ?", categoryId: categories[4].id },
      { text: "Comment g√®res-tu les moments difficiles ?", categoryId: categories[4].id },
      { text: "Quelle habitude as-tu adopt√©e qui a chang√© ta vie ?", categoryId: categories[4].id },
      { text: "De quoi es-tu le plus fier dans ton parcours personnel ?", categoryId: categories[4].id },
      { text: "Quel d√©fi personnel t'a le plus fait grandir ?", categoryId: categories[4].id },
      { text: "Comment surmontes-tu tes peurs ?", categoryId: categories[4].id },
      { text: "Quelle zone de confort as-tu r√©cemment quitt√©e ?", categoryId: categories[4].id },
      { text: "Quel √©chec t'a le plus appris sur toi ?", categoryId: categories[4].id },
      { text: "Comment entretiens-tu ta motivation au quotidien ?", categoryId: categories[4].id },
      { text: "Quelle pratique de bien-√™tre as-tu adopt√©e ?", categoryId: categories[4].id },
      { text: "Comment d√©veloppes-tu ta confiance en toi ?", categoryId: categories[4].id },
      { text: "Quel livre ou enseignement t'a transform√© ?", categoryId: categories[4].id },
      { text: "Comment g√®res-tu le stress dans ta vie ?", categoryId: categories[4].id },
      { text: "Quelle routine matinale te met en forme pour la journ√©e ?", categoryId: categories[4].id },
      { text: "Comment cultives-tu ta cr√©ativit√© ?", categoryId: categories[4].id },
      { text: "Quel objectif personnel poursuis-tu actuellement ?", categoryId: categories[4].id },
      { text: "Comment restes-tu connect√© √† tes valeurs ?", categoryId: categories[4].id },
      { text: "Quelle nouvelle perspective as-tu adopt√©e r√©cemment ?", categoryId: categories[4].id },
      { text: "Comment c√©l√®bres-tu tes petites victoires ?", categoryId: categories[4].id }
    ];

    await Promise.all(
      questionsData.map(q => 
        prisma.question.create({ data: q })
      )
    );

    console.log('‚úÖ Questions cr√©√©es:', questionsData.length);
    console.log('üìä R√©partition:');
    console.log('   - Souvenirs & Nostalgie: 20 questions');
    console.log('   - R√©flexions Profondes: 20 questions');
    console.log('   - Relations & Connexions: 20 questions');
    console.log('   - R√™ves & Aspirations: 20 questions');
    console.log('   - Croissance Personnelle: 20 questions');
    console.log('üéâ Seed completed successfully!');
  } catch (error) {
    console.error('‚ùå Erreur dans le seed:', error);
    throw error;
  }
}

main()
  .catch((e) => {
    console.error('‚ùå Erreur fatale:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
    console.log('üîå Connexion ferm√©e');
  });